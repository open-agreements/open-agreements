# OpenAgreements OpenSpec Traceability Matrix

> Auto-generated by `scripts/validate_openspec_coverage.mjs`.
> Do not hand-edit this file.

This matrix maps canonical OpenSpec `#### Scenario:` entries to Allure story mappings extracted from `*.allure.test.ts` files.

## Capability: `open-agreements`

| Scenario | Status | Allure Test Files | Notes |
|---|---|---|---|
| --json-strict exits non-zero on metadata errors | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| --templates-only filters to templates | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| All values present | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| CI blocks modification of CC BY-ND template | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Claude Code adapter implements interface | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Clean install from registry works | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Cross-run replacement | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| DOCX file detected in recipe directory | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Default value type mismatch | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Derivative blocked for non-derivative license | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Draft replacements output | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Enum field without options | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| External metadata requires source_sha256 | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| External template appears in list output | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| External template fill | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Fill command renders output | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Full pipeline with auto-download | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Full pipeline with user-supplied input | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Invalid license enum fails validation | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| JSON output includes full metadata sorted by name | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Keep intermediate files | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Leftover brackets detected | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| List command shows templates | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Malicious template expression blocked | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Missing metadata field fails validation | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Missing required field | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Missing source_url | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Multi-commit PR license check | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| New adapter can be added without modifying core | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Optional field missing from DOCX | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Output heading validation | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Output structure matches source | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Placeholder discovery | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Preview-only fallback without Node.js | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Push to main license check | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Remove footnotes | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Remove paragraph patterns | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Replacement target not covered by schema | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Required field missing from DOCX | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Run clean stage only | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Run full pipeline | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Run patch stage only | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Sandbox enabled by default | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Scaffold recipe validation | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Single-run replacement | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Skill interviews user for field values | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Skill renders DOCX after interview | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Skill renders DOCX via installed CLI | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Skill renders DOCX via npx (zero pre-install) | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Smart quote handling | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Structural drift detected | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Successful template fill | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Table cell processing | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Template placeholder extraction | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Unknown key in fill values | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Unrendered tags detected | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Valid metadata passes validation | covered | `tests/open_agreements_traceability.allure.test.ts` |  |
| Valid recipe metadata | covered | `tests/open_agreements_traceability.allure.test.ts` |  |

